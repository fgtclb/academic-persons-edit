<html
    lang="en"
    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    data-namespace-typo3-fluid="true"
>

<f:layout name="ProfileEdit" />

<f:section name="Main">

    <f:render
        partial="Profile/Forms/Errors"
        arguments="{object:ProfileFormData}"
    />

    <div class="academic-persons-edit-edit">
        <f:render
            partial="Profile/Header"
            arguments="{
                header: '{profile.title} {profile.firstName} {profile.middleName} {profile.lastName}',
                layout: '{data.header_layout}',
                subheader: '{data.subheader}',
                detail: 'true',
                positionClass: 'profile-header'
            }"
        />

        <f:if condition="{profile.languageUid}=={currentLanguageUid}">
            <f:then>
                <f:asset.script
                    identifier="ckeditor"
                    src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"
                    async="1"
                    defer="1"
                />

                <f:asset.script
                    identifier="ckeditor-config"
                    src="EXT:academic_persons_edit/Resources/Public/JavaScript/CKEditor.js"
                    async="1"
                    defer="1"
                />

                <f:form
                    action="update"
                    name="profileFormData"
                    object="{profileFormData}"
                    arguments="{profile: profile}"
                >
                    <f:render
                        partial="Profile/Buttons/SaveExitCancel"
                        arguments="{cancelUrl: cancelUrl}"
                    />

                    <f:render
                        partial="Profile/Properties/Profile"
                        arguments="{
                            profile: profileFormData,
                            genderOptions: genderOptions,
                            validations: validations,
                        }"
                    />

                    <f:render
                        partial="Profile/Buttons/SaveExitCancel"
                        arguments="{cancelUrl: cancelUrl}"
                    />
                </f:form>
            </f:then>
            <f:else>
                <p>{f:translate(key: 'list.noTranslationFound',extensionName: 'academic_persons_edit')}</p>

                <f:if condition="{translationAllowed}">
                    <f:link.action
                        action="translate"
                        arguments="{profileUid: profile.uid, languageUid: currentLanguageUid}"
                        class="btn btn-primary"
                    >
                        {f:translate(key: 'actions.translate', extensionName: 'academic_persons_edit')}
                    </f:link.action>
                </f:if>
            </f:else>
        </f:if>
    </div>
</f:section>

</html>
